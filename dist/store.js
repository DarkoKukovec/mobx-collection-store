!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=5)}([function(t,e,n){"use strict";e.TYPE="__type__"},function(t,e){t.exports=require("mobx")},function(t,e,n){"use strict";var r=n(3);e.Collection=r.Collection;var o=n(4);e.Model=o.Model},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var f=t.length-1;f>=0;f--)(o=t[f])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},f=n(1),c=n(0),l=function(){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];o(this,t),this.types=[],this.data=f.observable([]),(e=this.data).push.apply(e,r(n.map(this.initItem)));var i={},u=!0,a=!1,c=void 0;try{for(var l,s=this.types[Symbol.iterator]();!(u=(l=s.next()).done);u=!0){var y=l.value;i[y.type]=this.getByType(y.type)}}catch(t){a=!0,c=t}finally{try{!u&&s.return&&s.return()}finally{if(a)throw c}}f.extendObservable(this,i)}return i(t,[{key:"getByType",value:function(t){var e=this;return f.computed(function(){return e.data.filter(function(e){return e.type===t})})}},{key:"getModel",value:function(t){return this.types.find(function(e){return e.type===t})}},{key:"initItem",value:function(t){var e=t[c.TYPE],n=this.getModel(e);return new n(t)}},{key:"add",value:function(t,e){var n=this;if(t instanceof Array)return f.transaction(function(){return t.map(function(t){return n.add(t,e)})});var r=void 0;if(e){var o=this.getModel(e);r=new o(t)}else r=t;var i=this.find(r.type,r.id);return i?(i.update(t),i):(this.data.push(r),r.collection=this,r)}},{key:"find",value:function(t,e){return e?this.data.find(function(n){return n.type===t&&n.id===e})||null:this.findAll(t)[0]||null}},{key:"findAll",value:function(t){return this.data.filter(function(e){return e.type===t})}},{key:"remove",value:function(t,e){var n=this.find(t,e);return this.data.remove(n),n}},{key:"removeAll",value:function(t){var e=this,n=this.findAll(t);return f.transaction(function(){n.forEach(function(t){e.data.remove(t)})}),n}},{key:"toJS",value:function(){return this.data.map(function(t){return t.toJS()})}},{key:"length",get:function(){return this.data.length}}]),t}();a([f.computed],l.prototype,"length",null),e.Collection=l},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var f=t.length-1;f>=0;f--)(o=t[f])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},f=n(1),c=n(0),l=function(){function t(e){o(this,t),this.collection=null,this.data=f.observable({}),this.data=f.observable(e),this.id=e[this.idAttribute];var n=Object.keys(e),r={},i=!0,u=!1,a=void 0;try{for(var c,l=n[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var s=c.value;r[s]=this.getProp(s)}}catch(t){u=!0,a=t}finally{try{!i&&l.return&&l.return()}finally{if(u)throw a}}var y=Object.keys(this.refs),d=!0,p=!1,v=void 0;try{for(var h,b=y[Symbol.iterator]();!(d=(h=b.next()).done);d=!0){var m=h.value;r[m]=this.getRef(m),r[m+"Id"]=this.getProp(m)}}catch(t){p=!0,v=t}finally{try{!d&&b.return&&b.return()}finally{if(p)throw v}}f.extendObservable(this,r)}return i(t,[{key:"getRef",value:function(t){var e=this;return f.computed(function(){return e.collection.find(e.refs[t],e.data[t])})}},{key:"getProp",value:function(t){var e=this;return f.computed(function(){return e.data[t]})}},{key:"setRef",value:function(e,n){var r=this;return f.transaction(function(){if("object"!==("undefined"==typeof n?"undefined":u(n))||n instanceof t)r.data[e]=n instanceof t?n.id:n;else{var o=r.refs[e],i=r.collection.add(n,o);r.data[e]=i.id}var a=r.collection.find(r.refs[e],r.data[e]);return n instanceof t&&!a&&(r.collection.add(n),a=n),a})}},{key:"update",value:function(e){var n=this,r={},o=e instanceof t?e.keys:Object.keys(e);return f.transaction(function(){o.forEach(function(t){t!==n.idAttribute&&(r[t]=n.set(t,e[t]))})}),r}},{key:"set",value:function(t,e){var n=this,o=e;return f.transaction(function(){if(t in n.refs?o=n.setRef(t,e):n.data[t]=e,!(t in n.data))if(t in n.refs){var i;f.extendObservable(n,(i={},r(i,t,n.getRef(t)),r(i,t+"Id",n.getProp(t)),i))}else f.extendObservable(n,r({},t,n.getProp(t)))}),o}},{key:"toJS",value:function(){var t=f.toJS(this.data);return t[c.TYPE]=this.type,t}},{key:"idAttribute",get:function(){return this.constructor.idAttribute}},{key:"type",get:function(){return this.constructor.type}},{key:"refs",get:function(){return this.constructor.refs}},{key:"keys",get:function(){return Object.keys(this.data)}}]),t}();l.idAttribute="id",l.refs={},a([f.computed],l.prototype,"idAttribute",null),a([f.computed],l.prototype,"type",null),a([f.computed],l.prototype,"refs",null),a([f.computed],l.prototype,"keys",null),e.Model=l},function(t,e,n){t.exports=n(2)}]);
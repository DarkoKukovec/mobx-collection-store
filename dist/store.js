exports["mobx-collection-store"]=function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=5)}([function(t,e,n){"use strict";e.TYPE="__type__"},function(t,e){t.exports=require("mobx")},function(t,e,n){"use strict";var r=n(3);e.Collection=r.Collection;var o=n(4);e.Model=o.Model},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var f=t.length-1;f>=0;f--)(o=t[f])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},f=n(1),c=n(0),l=function(){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];o(this,t),this.types=[],this.data=f.observable([]),(e=this.data).push.apply(e,r(n.map(this.initItem)));var i={},u=!0,a=!1,c=void 0;try{for(var l,s=this.types[Symbol.iterator]();!(u=(l=s.next()).done);u=!0){var y=l.value;i[y.type]=this.getByType(y.type)}}catch(t){a=!0,c=t}finally{try{!u&&s.return&&s.return()}finally{if(a)throw c}}f.extendObservable(this,i)}return i(t,[{key:"getByType",value:function(t){var e=this;return f.computed(function(){return e.data.filter(function(e){return e.type===t})})}},{key:"getModel",value:function(t){return this.types.find(function(e){return e.type===t})}},{key:"initItem",value:function(t){var e=t[c.TYPE],n=this.getModel(e);return new n(t,this)}},{key:"add",value:function(t,e){var n=this;if(t instanceof Array)return f.transaction(function(){return t.map(function(t){return n.add(t,e)})});var r=void 0;if(e){var o=this.getModel(e);r=new o(t,this)}else r=t;var i=this.find(r.type,r.id);return i?(i.update(t),i):(this.data.push(r),r.collection=this,r)}},{key:"find",value:function(t,e){return e?this.data.find(function(n){return n.type===t&&n.id===e})||null:this.findAll(t)[0]||null}},{key:"findAll",value:function(t){return this.data.filter(function(e){return e.type===t})}},{key:"remove",value:function(t,e){var n=this.find(t,e);return this.data.remove(n),n}},{key:"removeAll",value:function(t){var e=this,n=this.findAll(t);return f.transaction(function(){n.forEach(function(t){e.data.remove(t)})}),n}},{key:"toJS",value:function(){return this.data.map(function(t){return t.toJS()})}},{key:"length",get:function(){return this.data.length}}]),t}();a([f.computed],l.prototype,"length",null),e.Collection=l},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var f=t.length-1;f>=0;f--)(o=t[f])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},f=n(1),c=n(0),l=function(){function t(e,n){var r=this;o(this,t),this.collection=null,this.data=f.observable({}),this.attrs=f.observable({}),this.refs=f.observable({}),f.transaction(function(){r.id=e[r.idAttribute],r.collection=n,r.update(e),r.initRefGetters()})}return i(t,[{key:"initRefGetters",value:function(){var t={},e=Object.keys(this.refDefs),n=!0,r=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var a=i.value;t[a]=this.getRef(a)}}catch(t){r=!0,o=t}finally{try{!n&&u.return&&u.return()}finally{if(r)throw o}}f.extendObservable(this.refs,t)}},{key:"getRef",value:function(t){var e=this;return f.computed(function(){return e.collection.find(e.refDefs[t],e.data[t])})}},{key:"getProp",value:function(t){var e=this;return f.computed(function(){return e.data[t]})}},{key:"setRef",value:function(e,n){var r=this;return f.transaction(function(){if(n instanceof t){var o=r.collection.add(n);r.data[e]=o.id}else if("object"===("undefined"==typeof n?"undefined":u(n))){var i=r.refDefs[e],a=r.collection.add(n,i);r.data[e]=a.id}else r.data[e]=n;return r.collection.find(r.refDefs[e],r.data[e])})}},{key:"update",value:function(e){var n=this,r={},o=e instanceof t?e.keys:Object.keys(e);return f.transaction(function(){o.forEach(function(t){t===n.idAttribute&&n.data[n.idAttribute]||(r[t]=n.set(t,e[t]))})}),r}},{key:"set",value:function(t,e){var n=e;return t in this.refDefs?n=this.setRef(t,e):this.data[t]=e,t in this.attrs||f.extendObservable(this.attrs,r({},t,this.getProp(t))),n}},{key:"toJS",value:function(){var t=f.toJS(this.data);return t[c.TYPE]=this.type,t}},{key:"static",get:function(){return this.constructor}},{key:"idAttribute",get:function(){return this.static.idAttribute}},{key:"type",get:function(){return this.static.type}},{key:"refDefs",get:function(){return this.static.refs}},{key:"keys",get:function(){return Object.keys(this.data)}}]),t}();l.idAttribute="id",l.refs={},a([f.computed],l.prototype,"idAttribute",null),a([f.computed],l.prototype,"type",null),a([f.computed],l.prototype,"refDefs",null),a([f.computed],l.prototype,"keys",null),e.Model=l},function(t,e,n){t.exports=n(2)}]);